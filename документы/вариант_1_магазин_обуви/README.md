# Вариант 1: Магазин обуви (базовый)

## Описание

Базовый проект — магазин обуви. Студенты знакомятся со структурой, моделями и формами.

---

## Часть 1. Настройка проекта

### Шаг 1.1. Создание виртуального окружения

Перейдите в папку проекта и выполните:

```bash
python -m venv venv
```

**Ожидаемый результат:** Создана папка `venv` с виртуальным окружением.

---

### Шаг 1.2. Активация виртуального окружения

**Windows (PowerShell):**
```powershell
venv\Scripts\activate
```

**Linux/macOS:**
```bash
source venv/bin/activate
```

**Ожидаемый результат:** В начале строки терминала появится `(venv)`.

---

### Шаг 1.3. Установка зависимостей

```bash
pip install -r requirements.txt
```

---

### Шаг 1.4. Создание и применение миграций

Миграции в проекте отсутствуют — их нужно создать и применить:

```bash
python manage.py makemigrations
python manage.py migrate
```

**Ожидаемый результат:** Созданы файлы миграций в `products/migrations/` и `orders/migrations/`, затем сообщения вида `Applying products.0001_initial... OK`, `Applying orders.0001_initial... OK` и т.д.

---

### Шаг 1.5. Создание суперпользователя

```bash
python manage.py createsuperuser
```

**Введите по запросу:**
- Имя пользователя (например: `admin`)
- Email (например: `admin@example.com`)
- Пароль (дважды, например: `admin123`)

**Ожидаемый результат:** Сообщение `Superuser created successfully.`

---

### Шаг 1.6. Регистрация моделей в админке (если нужно)

Откройте файл `products/admin.py`. Убедитесь, что зарегистрированы **Supplier** и **Unit**. Если их нет — добавьте:

```python
from django.contrib import admin
from products.models import Category, Product, Manufacturer, Supplier, Unit

@admin.register(Product)
class ProductAdmin(admin.ModelAdmin):
    ...

@admin.register(Category)
class CategoryAdmin(admin.ModelAdmin):
    ...

@admin.register(Manufacturer)
class ManufacturerAdmin(admin.ModelAdmin):
    ...

@admin.register(Supplier)
class SupplierAdmin(admin.ModelAdmin):
    list_display = ['name']

@admin.register(Unit)
class UnitAdmin(admin.ModelAdmin):
    list_display = ['name', 'abbreviation']
```

Сохраните файл (Ctrl+S).

---

### Шаг 1.7. Запуск сервера

```bash
python manage.py runserver
```

**Ожидаемый результат:** Сообщение `Starting development server at http://127.0.0.1:8000/`

Откройте в браузере: http://127.0.0.1:8000

---

## Часть 2. Добавление тестовых данных

### Шаг 2.1. Вход в админ-панель

1. Откройте http://127.0.0.1:8000/admin/
2. Введите логин и пароль суперпользователя
3. Нажмите «Войти»

---

### Шаг 2.2. Добавление категорий

1. В разделе **PRODUCTS** нажмите **Категории** → **Добавить категорию**
2. Добавьте по одной категории (поле «Название категории»):
   - Кроссовки
   - Ботинки
   - Туфли
   - Сандалии
   - Сапоги
   - Кеды
3. После каждой — нажмите **Сохранить**

---

### Шаг 2.3. Добавление производителей

1. В разделе **PRODUCTS** нажмите **Производители** (Manufacturer) → **Добавить**
2. Добавьте:
   - Nike
   - Adidas
   - Puma
   - Reebok
   - New Balance
3. Сохраняйте после каждой записи

---

### Шаг 2.4. Добавление поставщиков

1. **PRODUCTS** → **Поставщики** → **Добавить**
2. Добавьте:
   - Спорттовары ООО
   - Обувь Оптом
   - Шуз ООО
   - StepByStep

---

### Шаг 2.5. Добавление единиц измерения

1. **PRODUCTS** → **Единицы измерения** → **Добавить**
2. Добавьте:
   - Название: `штук`, Сокращение: `шт`
   - Название: `пар`, Сокращение: `пар`
   - Название: `упаковок`, Сокращение: `уп`

---

### Шаг 2.6. Добавление товаров

1. **PRODUCTS** → **Товары** → **Добавить товар**
2. Заполните форму для первого товара:
   - **Название товара:** Nike Air Max 270
   - **Категория:** Кроссовки
   - **Описание:** Удобные кроссовки для бега с амортизацией
   - **Производитель:** Nike
   - **Поставщик:** Спорттовары ООО
   - **Цена:** 12990
   - **Единица измерения:** штук
   - **Количество на складе:** 25
   - **Скидка (%):** 10
3. Нажмите **Сохранить**
4. Добавьте ещё 2–3 товара по аналогии (например: Adidas Ultraboost, Puma RS-X, Converse Chuck Taylor)

---

### Шаг 2.7. Проверка

1. Откройте http://127.0.0.1:8000/products/
2. Убедитесь, что отображается список товаров
3. Войдите под суперпользователем — должны появиться кнопки «Добавить товар», «Редактировать», «Удалить»

---

## Часть 3. Задания для занятия

### Задание 3.1. Изменить название сайта (10 мин)

**Цель:** Научиться редактировать базовый шаблон.

**Шаги:**
1. Откройте файл `templates/base/base.html` в редакторе
2. Найдите строку (примерно строка 49):
   ```html
   <i class="bi bi-shop"></i> Магазин обуви
   ```
3. Замените `Магазин обуви` на любое другое название, например: `Обувь для вас`
4. Сохраните файл (Ctrl+S)
5. Обновите страницу в браузере (F5)

**Ожидаемый результат:** В меню отображается новое название.

---

### Задание 3.2. Добавить приветственный текст (10 мин)

**Цель:** Добавить новый блок в шаблон.

**Шаги:**
1. Откройте `templates/products/product_list.html`
2. Найдите блок:
   ```html
   <div class="d-flex justify-content-between align-items-center mb-4">
       <h1><i class="bi bi-list-ul"></i> Список товаров</h1>
       ...
   </div>
   ```
3. После закрывающего `</div>` этого блока добавьте:
   ```html
   <p class="lead text-muted">Добро пожаловать в наш магазин! Здесь вы найдёте качественную обувь на любой вкус.</p>
   ```
4. Сохраните и обновите страницу (F5)

**Ожидаемый результат:** Под заголовком отображается приветственный текст.

---

### Задание 3.3. Добавить поле created_at в модель Product (25 мин)

**Цель:** Добавить поле в модель и выполнить миграции.

**Шаги:**
1. Откройте `products/models.py`
2. В классе `Product` найдите поле `image` и после него (перед `class Meta`) добавьте:
   ```python
   created_at = models.DateTimeField(
       auto_now_add=True,
       verbose_name="Дата создания"
   )
   ```
3. Сохраните файл
4. В терминале выполните:
   ```bash
   python manage.py makemigrations
   ```
5. При появлении вопроса подтвердите: `y` и Enter
6. Выполните:
   ```bash
   python manage.py migrate
   ```
7. Откройте админ-панель → Товары → откройте любой товар
8. Убедитесь, что появилось поле «Дата создания»

**Ожидаемый результат:** У товаров есть дата создания, она заполняется автоматически.

---

### Задание 3.4. Добавить help_text к полю description в форме (15 мин)

**Цель:** Улучшить форму подсказками.

**Шаги:**
1. Откройте `products/forms.py`
2. В методе `__init__` после строки `self.fields['image'].help_text = ...` добавьте:
   ```python
   self.fields['description'].help_text = 'Краткое описание товара (материал, особенности)'
   ```
3. Сохраните файл (Ctrl+S)
4. Откройте создание или редактирование товара (кнопка «Добавить товар» на сайте или в админке)
5. Убедитесь, что под полем «Описание» отображается подсказка

**Ожидаемый результат:** Под полем «Описание» видна подсказка.

---

### Задание 3.5. Добавить валидацию скидки в форму (20 мин)

**Цель:** Ограничить скидку от 0 до 100%.

**Шаги:**
1. Откройте `products/forms.py`
2. В классе `ProductForm` после метода `__init__` добавьте метод:
   ```python
   def clean_discount(self):
       discount = self.cleaned_data.get('discount')
       if discount is not None and (discount < 0 or discount > 100):
           raise forms.ValidationError('Скидка должна быть от 0 до 100%')
       return discount
   ```
3. Сохраните файл (Ctrl+S)
4. Откройте форму создания товара
5. Введите скидку 150 и нажмите «Сохранить» — должна появиться ошибка «Скидка должна быть от 0 до 100%»

**Ожидаемый результат:** Скидка не может быть больше 100%.

---

## Чек-лист выполнения

- [ ] Проект запускается без ошибок
- [ ] Создан суперпользователь
- [ ] Добавлены категории, производители, поставщики, единицы измерения
- [ ] Добавлено минимум 3 товара
- [ ] Изменено название сайта
- [ ] Добавлен приветственный текст
- [ ] Добавлено поле `created_at` в модель Product
- [ ] Добавлен `help_text` к полю description
- [ ] Добавлена валидация скидки 0–100%

---

## Файлы для редактирования

| Файл | Назначение |
|------|------------|
| `products/models.py` | Модели |
| `products/forms.py` | Формы |
| `products/admin.py` | Регистрация в админке |
| `templates/base/base.html` | Базовый шаблон |
| `templates/products/product_list.html` | Список товаров |
